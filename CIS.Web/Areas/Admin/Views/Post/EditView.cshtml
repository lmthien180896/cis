@model CIS.Web.Models.PostViewModel
@{
    ViewBag.Title = "CreateView";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<h2>Chỉnh sửa tin tức</h2>

@section js {   
    <script src="~/Assets/admin/js/controller/postController.js"></script>
    <script>
        $('#btnSelectImage').off('click').on('click', function (e) {
            //e.preventDefault();
            var finder = new CKFinder();
            finder.selectActionFunction = function (url) {
                $('#txtImage').val(url);
                $('#img').prop("src", url);
                $('#btnDelteImage').removeClass('hide');
            };
            finder.popup();
        });

        var editor = CKEDITOR.replace('txtContent', {
            customConfig: '/Assets/admin/libs/ckeditor/config.js'
        });

        if ("@Model.Image" == "") {
            $('#btnDelteImage').addClass('hide');
        }
    </script>
}

<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_title">
            <h2>Thông tin tin tức</h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <br />
            <form action="/Admin/Post/Update" method="post" class="form-horizontal form-label-left" novalidate>
                <input type="hidden" value="@Model.ID" name="id" />

                <div class="item form-group">
                    <label class="control-label" for="categoryID">Loại bài đăng</label>
                    <select class="form-control" name="categoryId">
                        @foreach (var category in Model.PostCategories)
                        {
                            if (Model.CategoryID == category.ID)
                            {
                                <option value="@category.ID" selected>@category.Name</option>
                            }
                            else
                            {
                                <option value="@category.ID">@category.Name</option>
                            }
                        }
                    </select>
                </div>

                <div class="item form-group">
                    <label class="control-label" for="title">Tiêu đề</label>
                    <input class="form-control" id="txtName" value="@Model.Name" name="name" placeholder="Tiêu đề" type="text" required="required">
                </div>
                <div class="item form-group">
                    <label class="control-label" for="title">Tiêu đề SEO</label>
                    <input class="form-control" id="txtAlias" name="alias" value="@Model.Alias" type="text" readonly>
                </div>
                <div class="item form-group">
                    <label class="control-label" for="title">URL liên kết</label>
                    <input class="form-control" id="txtReferenceUrl" name="referenceUrl" value="@Model.ReferenceUrl" type="url">
                </div>
                <div class="item form-group">
                    <label class="control-label" for="title">Mô tả ngắn</label>
                    <textarea class="form-control" name="description" id="txtDescription">@Model.Description</textarea>
                </div>
                <div class="item form-group">
                    <label class="control-label" for="title">Hình ảnh</label>
                    <input type="text" id="txtImage" name="image" class="form-control" value="@Model.Image" />
                </div>
                <div class="">
                    <button id="btnSelectImage" type="button" class="btn btn-default">Chọn ảnh</button>
                    <img id="img" src="@Model.Image" style="height:100px" />
                    <a href="#" id="btnDelteImage" class="text-danger">Xoá ảnh</a>
                </div>
                <div class="item form-group">
                    <label class="control-label">Input Tags</label>
                    <div class="">
                        <input id="tags_1" type="text" name="tags" class="tags form-control" value="@Model.Tags" />
                        <div id="suggestions-container" style="position: relative; float: left; width: 250px; margin: 10px;"></div>
                    </div>
                </div>
                <div class="item form-group">
                    <label class="control-label" for="title">Nội dung</label>
                    <textarea id="txtContent" name="content">@Model.Content</textarea>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-1 col-sm-3 col-xs-12">Hiển thị trang chủ</label>
                    <div style="margin-top: 5px">
                        <label>
                            @Html.CheckBoxFor(model => model.HomeFlag, new { @class = "js-switch" })
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-1 col-sm-3 col-xs-12">Tin nổi bật</label>
                    <div style="margin-top: 5px">
                        <label>
                            @Html.CheckBoxFor(model => model.HotFlag, new { @class = "js-switch" })
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-1 col-sm-3 col-xs-12">Đăng bài</label>
                    <div style="margin-top: 5px">
                        <label>
                            @Html.CheckBoxFor(model => model.Status, new { @class = "js-switch" })
                        </label>
                    </div>
                </div>
                <div class="ln_solid"></div>
                <div class="form-group">
                    <a href="/Admin/Post/Index" class="btn btn-primary">Cancel</a>
                    <button id="btnSubmit" type="submit" class="btn btn-success">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>